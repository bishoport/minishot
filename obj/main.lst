                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.8 #9946 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.module main
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _main
                             12 	.globl _drawShoot
                             13 	.globl _drawEnemy
                             14 	.globl _drawPlayer
                             15 	.globl _cpct_getScreenPtr
                             16 	.globl _cpct_setPALColour
                             17 	.globl _cpct_setPalette
                             18 	.globl _cpct_waitVSYNC
                             19 	.globl _cpct_setVideoMode
                             20 	.globl _cpct_drawSprite
                             21 	.globl _cpct_disableFirmware
                             22 ;--------------------------------------------------------
                             23 ; special function registers
                             24 ;--------------------------------------------------------
                             25 ;--------------------------------------------------------
                             26 ; ram data
                             27 ;--------------------------------------------------------
                             28 	.area _DATA
                             29 ;--------------------------------------------------------
                             30 ; ram data
                             31 ;--------------------------------------------------------
                             32 	.area _INITIALIZED
                             33 ;--------------------------------------------------------
                             34 ; absolute external ram data
                             35 ;--------------------------------------------------------
                             36 	.area _DABS (ABS)
                             37 ;--------------------------------------------------------
                             38 ; global & static initialisations
                             39 ;--------------------------------------------------------
                             40 	.area _HOME
                             41 	.area _GSINIT
                             42 	.area _GSFINAL
                             43 	.area _GSINIT
                             44 ;--------------------------------------------------------
                             45 ; Home
                             46 ;--------------------------------------------------------
                             47 	.area _HOME
                             48 	.area _HOME
                             49 ;--------------------------------------------------------
                             50 ; code
                             51 ;--------------------------------------------------------
                             52 	.area _CODE
                             53 ;src/main.c:23: void drawPlayer(){
                             54 ;	---------------------------------
                             55 ; Function drawPlayer
                             56 ; ---------------------------------
   0000                      57 _drawPlayer::
                             58 ;src/main.c:24: u8 *pvmen = cpct_getScreenPtr(CPCT_VMEM_START,PLAYER_X,PLAYER_Y);
   0000 21 25 B8      [10]   59 	ld	hl, #0xb825
   0003 E5            [11]   60 	push	hl
   0004 21 00 C0      [10]   61 	ld	hl, #0xc000
   0007 E5            [11]   62 	push	hl
   0008 CDr00r00      [17]   63 	call	_cpct_getScreenPtr
                             64 ;src/main.c:25: cpct_drawSprite(sp_player_ship,pvmen,SP_PLAYER_SHIP_W,SP_PLAYER_SHIP_H);
   000B 01r00r00      [10]   65 	ld	bc, #_sp_player_ship+0
   000E 11 08 10      [10]   66 	ld	de, #0x1008
   0011 D5            [11]   67 	push	de
   0012 E5            [11]   68 	push	hl
   0013 C5            [11]   69 	push	bc
   0014 CDr00r00      [17]   70 	call	_cpct_drawSprite
   0017 C9            [10]   71 	ret
                             72 ;src/main.c:28: void drawEnemy(u8 x){
                             73 ;	---------------------------------
                             74 ; Function drawEnemy
                             75 ; ---------------------------------
   0018                      76 _drawEnemy::
   0018 DD E5         [15]   77 	push	ix
   001A DD 21 00 00   [14]   78 	ld	ix,#0
   001E DD 39         [15]   79 	add	ix,sp
                             80 ;src/main.c:29: u8 *pvmen = cpct_getScreenPtr(CPCT_VMEM_START,x,ENEMY_Y);
   0020 3E 0A         [ 7]   81 	ld	a, #0x0a
   0022 F5            [11]   82 	push	af
   0023 33            [ 6]   83 	inc	sp
   0024 DD 7E 04      [19]   84 	ld	a, 4 (ix)
   0027 F5            [11]   85 	push	af
   0028 33            [ 6]   86 	inc	sp
   0029 21 00 C0      [10]   87 	ld	hl, #0xc000
   002C E5            [11]   88 	push	hl
   002D CDr00r00      [17]   89 	call	_cpct_getScreenPtr
                             90 ;src/main.c:30: cpct_drawSprite(sp_enemy_ship,pvmen,SP_ENEMY_SHIP_W,SP_ENEMY_SHIP_H);
   0030 01r00r00      [10]   91 	ld	bc, #_sp_enemy_ship+0
   0033 11 08 10      [10]   92 	ld	de, #0x1008
   0036 D5            [11]   93 	push	de
   0037 E5            [11]   94 	push	hl
   0038 C5            [11]   95 	push	bc
   0039 CDr00r00      [17]   96 	call	_cpct_drawSprite
   003C DD E1         [14]   97 	pop	ix
   003E C9            [10]   98 	ret
                             99 ;src/main.c:33: void drawShoot(){
                            100 ;	---------------------------------
                            101 ; Function drawShoot
                            102 ; ---------------------------------
   003F                     103 _drawShoot::
                            104 ;src/main.c:34: u8 *pvmen = cpct_getScreenPtr(CPCT_VMEM_START,SHOT_X,SHOT_Y);
   003F 21 25 A8      [10]  105 	ld	hl, #0xa825
   0042 E5            [11]  106 	push	hl
   0043 21 00 C0      [10]  107 	ld	hl, #0xc000
   0046 E5            [11]  108 	push	hl
   0047 CDr00r00      [17]  109 	call	_cpct_getScreenPtr
                            110 ;src/main.c:35: cpct_drawSprite(sp_shoot,pvmen,SP_SHOOT_W,SP_SHOOT_H);
   004A 01r00r00      [10]  111 	ld	bc, #_sp_shoot+0
   004D 11 08 10      [10]  112 	ld	de, #0x1008
   0050 D5            [11]  113 	push	de
   0051 E5            [11]  114 	push	hl
   0052 C5            [11]  115 	push	bc
   0053 CDr00r00      [17]  116 	call	_cpct_drawSprite
   0056 C9            [10]  117 	ret
                            118 ;src/main.c:39: void main(void) {
                            119 ;	---------------------------------
                            120 ; Function main
                            121 ; ---------------------------------
   0057                     122 _main::
                            123 ;src/main.c:51: cpct_disableFirmware(); //Dejamos de ejecutar el Firmware default del Amstrad (todo bajo nuestro control)
   0057 CDr00r00      [17]  124 	call	_cpct_disableFirmware
                            125 ;src/main.c:52: cpct_setVideoMode(0); //Ponemos el Modo de video 0 (4 colores)
   005A 2E 00         [ 7]  126 	ld	l, #0x00
   005C CDr00r00      [17]  127 	call	_cpct_setVideoMode
                            128 ;src/main.c:53: cpct_setPalette(g_palette,16);
   005F 21 10 00      [10]  129 	ld	hl, #0x0010
   0062 E5            [11]  130 	push	hl
   0063 21r00r00      [10]  131 	ld	hl, #_g_palette
   0066 E5            [11]  132 	push	hl
   0067 CDr00r00      [17]  133 	call	_cpct_setPalette
                            134 ;src/main.c:54: cpct_setBorder(HW_BLACK); //Colores por defecto del sistema
   006A 21 10 14      [10]  135 	ld	hl, #0x1410
   006D E5            [11]  136 	push	hl
   006E CDr00r00      [17]  137 	call	_cpct_setPALColour
                            138 ;src/main.c:61: while (TRUE)
   0071 06 48         [ 7]  139 	ld	b, #0x48
   0073                     140 00102$:
                            141 ;src/main.c:64: posEnemyX = posEnemyX - 1;
   0073 05            [ 4]  142 	dec	b
                            143 ;src/main.c:66: drawPlayer();
   0074 C5            [11]  144 	push	bc
   0075 CDr00r00      [17]  145 	call	_drawPlayer
   0078 C1            [10]  146 	pop	bc
                            147 ;src/main.c:67: drawEnemy(posEnemyX);
   0079 C5            [11]  148 	push	bc
   007A C5            [11]  149 	push	bc
   007B 33            [ 6]  150 	inc	sp
   007C CDr18r00      [17]  151 	call	_drawEnemy
   007F 33            [ 6]  152 	inc	sp
   0080 CDr3Fr00      [17]  153 	call	_drawShoot
   0083 CDr00r00      [17]  154 	call	_cpct_waitVSYNC
   0086 C1            [10]  155 	pop	bc
   0087 18 EA         [12]  156 	jr	00102$
                            157 	.area _CODE
                            158 	.area _INITIALIZER
                            159 	.area _CABS (ABS)
